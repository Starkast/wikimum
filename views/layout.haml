!!!
%html
  %head
    %meta{ 'http-equiv' => 'content-type', content: 'text/html; charset=utf-8' }
    %meta{ name: 'referrer', content: 'same-origin' }
    %title
      = "#{@page_title} - " if @page_title
      Starkast Wiki
    %link{ href: '/favicon.ico', rel: 'shortcut icon', type: 'image/ico' }
    %link{ href: "/stylesheets/default.css?#{App.cache_bust}", rel: 'stylesheet', type: 'text/css' }
    - settings.js.each do |js|
      %script{ src: js.fetch(:url), integrity: js.fetch(:sha), crossorigin: :anonymous }
    %script{type: "importmap"}
      != javascript_imports
    %script{type: "module"}
      import "application"
  %body{data: {
          controller: "page-navigation search-navigation",
          action: "keydown.h->page-navigation#home |
                   keydown.i->page-navigation#list |
                   keydown.l->page-navigation#latest |
                   keydown.n->page-navigation#new |
                   keydown.e->page-navigation#edit |
                   keydown.s->page-navigation#focusSearch |
                   keydown.esc->page-navigation#blurSearch |
                   keydown.down->search-navigation#down |
                   keydown.j->search-navigation#down |
                   keydown.up->search-navigation#up |
                   keydown.k->search-navigation#up |
                   keydown.o->search-navigation#open |
                   keydown.enter->search-navigation#open"
        }}
    %div{ id: @edit_mode ? 'container-lg' : 'container' }
      #header
        #login
          != haml :'../layouts/_login', layout: false
        #administration
          != haml :'../layouts/_administration', layout: false
      #logo
        != haml :'../layouts/_logo', layout: false
      #navigation
        != haml :'../layouts/_navigation', layout: false
      #sub-navigation
        #actions
          -if @page
            != haml :'../page/_actions', locals: { page: @page }, layout: false
        #status
      != haml :'../layouts/_flash', layout: false
      #content
        !=yield
    #footer
      != haml :'../layouts/_footer', layout: false
